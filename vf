#!/usr/bin/env ruby

def disp_instruction() abort "you need argument." end

terms = ARGV || disp_instruction

def includes(text, terms)
  terms.select{|term| text.include?(term) }.size == terms.size
end

def replace(text, terms)
  terms.each { |term| text = text.gsub(term, "[#{term}]") }
  text
end

Dir.glob("**/*").select{|file| includes(file, terms) }.each do |f|
  print "#{replace(f, terms)} ? [y/n/q]"
  input = $stdin.gets.chomp.downcase
  system "vim #{f}" if input == "y"
  abort if input == "q"
end

